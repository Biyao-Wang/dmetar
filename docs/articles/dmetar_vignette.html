<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>dmetar Vignette • dmetar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="dmetar Vignette">
<meta property="og:description" content="">
<meta property="og:image" content="http://dmetar.protectlab.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dmetar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/dmetar.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/">Book</a>
</li>
<li>
  <a href="https://protectlab.org/en">Protect Lab</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MathiasHarrer/dmetar">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>dmetar Vignette</h1>
                        <h4 class="author">Mathias Harrer &amp; David Daniel Ebert</h4>
            
            <h4 class="date">2019-08-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MathiasHarrer/dmetar/blob/master/vignettes/dmetar_vignette.Rmd"><code>vignettes/dmetar_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>dmetar_vignette.Rmd</code></div>

    </div>

    
    
<p><img src="fig/banner.jpg" align="left" alt="" width="680"></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<p><br></p>
<div id="about-dmetar" class="section level2">
<h2 class="hasAnchor">
<a href="#about-dmetar" class="anchor"></a>About <code>dmetar</code>
</h2>
<p>The <code>dmetar</code> package serves as the companion <em>R</em> package for the online guide <a href="https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/"><strong>Doing Meta-Analysis in R - A Hands-on Guide</strong></a> written by Mathias Harrer, Pim Cuijpers, Toshi Furukawa and David Ebert. This freely available guide shows how to perform meta-analyses in <em>R</em> from scratch with no prior <em>R</em> knowledge required. The guide, as well as the <code>dmetar</code> package, have a focus on biomedical and psychological research synthesis, but methods are applicable to other research fields too. The guide primarily focuses on two widely used packages for meta-analysis, <code>meta</code> (Schwarzer, 2007) and <code>metafor</code> (Viechtbauer, 2010), and how they can be applied in real-world use cases. The <code>dmetar</code> package thus aims to provide additional tools and functionalities for researchers conducting meta-analyses using these packages and the Doing Meta-Analysis in R guide.</p>
<p>In this vignette, we provide a rough overview of the core functionalities of the package. An in-depth introduction into the package and how its functions can be applied to “real-world” meta-analyses can be found in the online version of the guide. To get detailed documentation of specific functions, you can consult the <code>dmetar</code> <a href="www.dmetar.protectlab.org/reference/index.html">reference page</a>.</p>
<p>Currently, the <code>dmetar</code> package is still under development (version 0.0.9000). This means that, despite intense testing, we cannot guarantee that functions will work as intended under all circumstances and for all environments used. To report a bug, or ask a question, please contact <strong>Mathias</strong> (<a href="mailto:mathias.harrer@fau.de">mathias.harrer@fau.de</a>) or <strong>David</strong> (<a href="mailto:d.d.ebert@vu.nl">d.d.ebert@vu.nl</a>)</p>
<p><br></p>
<p><br></p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Given that <code>dmetar</code> is currently under development, the package is only available from <a href="https://github.com/MathiasHarrer/dmetar"><strong>GitHub</strong></a> right now. To install the development version, you can use the <code>install_github</code> function from the <a href="https://www.rstudio.com/products/rpackages/devtools/"><code>devtools</code></a> package. Given that the package already passes the <code>R CMD Check</code>, we aim to submit the package to <em>CRAN</em> in the near future after the development process has been completed.</p>
<p><strong>Use the code below to install the package:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"devtools"</span>)) {
  <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
}
devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/reexports.html">install_github</a></span>(<span class="st">"MathiasHarrer/dmetar"</span>)</code></pre></div>
<p>The package can then be loaded as usual using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dmetar)</code></pre></div>
<div id="installation-errors" class="section level3">
<h3 class="hasAnchor">
<a href="#installation-errors" class="anchor"></a>Installation errors</h3>
<div id="r-version" class="section level4">
<h4 class="hasAnchor">
<a href="#r-version" class="anchor"></a>R Version</h4>
<p>The <code>dmetar</code> package requires that <em>R</em> Version 3.5 or greater is installed and used in RStudio. You can check your current <em>R</em> version by running:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/Version.html">R.Version</a></span>()<span class="op">$</span>version.string</code></pre></div>
<p>If you have an <em>R</em> version below 3.5 installed, installing <code>dmetar</code> will likely cause an error because the dependency <code>metafor</code> was not found. This means that you have to update <em>R</em>. A tutorial on how to update <em>R</em> on your system can be found <a href="https://www.linkedin.com/pulse/3-methods-update-r-rstudio-windows-mac-woratana-ngarmtrakulchol/">here</a>.</p>
</div>
<div id="jags" class="section level4">
<h4 class="hasAnchor">
<a href="#jags" class="anchor"></a>JAGS</h4>
<p>Another common problem involves the dependency <code>rjags</code>. This package needs JAGS installed on your computer to function properly. JAGS is a computer program and can be downloaded for free <a href="https://sourceforge.net/projects/mcmc-jags/files/">here</a>. If this package is not already installed, the installation manager may ask you this question:</p>
<pre><code>There is a binary version available but the source version is later:
      binary source needs_compilation
rjags    4-8    4-9              TRUE

Do you want to install from sources the package which needs compilation? (Yes/no/cancel) </code></pre>
<p>If you answer with <code>Yes</code>, and do not have JAGS installed, the installation manager will likely throw this error:</p>
<pre><code>configure: error: "automatic detection of JAGS failed. 
Please use pkg-config to locate the JAGS library. 
See the INSTALL file for details."
ERROR: configuration failed for package ‘rjags’</code></pre>
<p><br></p>
<p><br></p>
</div>
</div>
</div>
<div id="functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#functionality" class="anchor"></a>Functionality</h2>
<p>The <code>dmetar</code> package provides tools for different stages of the meta-analysis process. Functions cover topics such as power analysis, effect size calculation, small-study effects, publication bias, meta-regression, subgroup analysis, risk of bias assessment, and network meta-analyses. Many <code>dmetar</code> functions heavily interact with functions from the <code>meta</code> package to improve the work flow when conducting meta-analysis. Therefore, the <code>meta</code> package should be installed and loaded into from the library first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(meta)</code></pre></div>
<p><br></p>
<p><br></p>
</div>
<div id="datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#datasets" class="anchor"></a>Datasets</h2>
<p>To show some of the core functionality of the <code>dmetar</code> package, we will use three datasets which come shipped with the package itself: <code>ThirdWave</code>, <code>MVRegressionData</code> and <code>NetDataNetmeta</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"ThirdWave"</span>)
<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"MVRegressionData"</span>)
<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"NetDataNetmeta"</span>)</code></pre></div>
<p><br></p>
<p><br></p>
</div>
<div id="power-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#power-analysis" class="anchor"></a>Power Analysis</h2>
<p>The <code>dmetar</code> package contains two functions for <em>a priori</em> <a href="https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/power-analysis.html">power analyses</a> of a meta-analysis: <a href="www.dmetar.protectlab.org/reference/power.analysis.html"><code>power.analysis</code></a> and <a href="www.dmetar.protectlab.org&amp;/reference/power.analysis.subgroup.html"><code>power.analysis.subgroups</code></a>. Let us assume that researchers expect to have approximately 18 studies in their meta-analysis, with moderate between-group heterogeneity and about 50 participants per arm and study. Will there be sufficient power to detect an assumed minimally important difference of <span class="math inline">\(d=0.18\)</span>? The <code>power.analysis</code> function can be used to answer this question.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/power.analysis.html">power.analysis</a></span>(<span class="dt">d =</span> .<span class="dv">18</span>, <span class="dt">k =</span> <span class="dv">18</span>, <span class="dt">n1 =</span> <span class="dv">50</span>, <span class="dt">n2 =</span> <span class="dv">50</span>, <span class="dt">heterogeneity =</span> <span class="st">"moderate"</span>)
<span class="co">#&gt; Random-effects model used (moderate heterogeneity assumed).</span></code></pre></div>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-8-1.png" width="700" style="display: block; margin: auto;"></p>
<pre><code>#&gt; Power:
#&gt; [1] 0.8386247</code></pre>
<p><br></p>
<p><br></p>
</div>
<div id="effect-size-calculation" class="section level2">
<h2 class="hasAnchor">
<a href="#effect-size-calculation" class="anchor"></a>Effect size calculation</h2>
<p>The <code>dmetar</code> packge includes several functions to calculate effect sizes needed for meta-analyses: <a href="www.dmetar.protectlab.org/reference/NNT.html"><code>NNT</code></a>, <a href="www.dmetar.protectlab.org/reference/se.from.p.html"><code>se.from.p</code></a> and <a href="www.dmetar.protectlab.org/reference/pool.groups.html"><code>pool.groups</code></a>.</p>
<p>Using the <code>NNT</code> function, we can calculate the number needed to treat <span class="math inline">\(NNT\)</span> for the first effect size in <code>ThirdWave</code>. In this example, we use Furukawa’s method (Furukawa &amp; Leucht, 2011), assuming a control group event ratio (<code>CER</code>) of 0.2</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/NNT.html">NNT</a></span>(ThirdWave<span class="op">$</span>TE[<span class="dv">1</span>], <span class="dt">CER =</span> <span class="fl">0.2</span>)
<span class="co">#&gt; Furukawa's method used.</span>
<span class="co">#&gt; [1] 4.043666</span></code></pre></div>
<p>We can also pool together two groups of a study into one group using the <code>pool.groups</code> function once we have obtained the <span class="math inline">\(n\)</span>, mean and SD of each arm. This can be helpful if we want to avoid a <a href="https://handbook-5-1.cochrane.org/chapter_9/9_3_1_unit_of_analysis_issues.htm">unit-of-analysis error</a>. Here is an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/pool.groups.html">pool.groups</a></span>(<span class="dt">n1 =</span> <span class="dv">50</span>, <span class="dt">n2 =</span> <span class="dv">65</span>, <span class="dt">m1 =</span> <span class="fl">12.3</span>, <span class="dt">m2 =</span> <span class="fl">14.8</span>, <span class="dt">sd1 =</span> <span class="fl">2.45</span>, <span class="dt">sd2 =</span> <span class="fl">2.89</span>)
<span class="co">#&gt;    Mpooled SDpooled Npooled</span>
<span class="co">#&gt; 1 13.71304 2.969564     115</span></code></pre></div>
<p>When extracting effect size data, studies sometimes only report an effect size of interest, and its <span class="math inline">\(p\)</span>-value. To pool effect sizes using functions such as the <a href="https://www.rdocumentation.org/packages/meta/versions/4.9-6/topics/metagen"><code>metagen</code></a> function, however, we need some dispersion measure (e.g., <span class="math inline">\(SE\)</span>, <span class="math inline">\(SD\)</span> or the variance). The <code>se.from.p</code> function can be used to calculate the standard error (<span class="math inline">\(SE\)</span>), which can the be used directly for pooling using, for example, the <code>metagen</code> function. Here is an example assuming an effect of <span class="math inline">\(d=0.38\)</span>, a <span class="math inline">\(p\)</span>-value of <span class="math inline">\(0.0456\)</span> and a total <span class="math inline">\(N\)</span> of <span class="math inline">\(83\)</span>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/se.from.p.html">se.from.p</a></span>(<span class="dt">effect.size =</span> <span class="fl">0.38</span>, <span class="dt">p =</span> <span class="fl">0.0456</span>, <span class="dt">N =</span> <span class="dv">83</span>)
<span class="co">#&gt;   EffectSize StandardError StandardDeviation        LLCI     ULCI</span>
<span class="co">#&gt; 1       0.38     0.1904138          1.734752 0.006788985 0.753211</span></code></pre></div>
<p><br></p>
<p><br></p>
</div>
<div id="risk-of-bias" class="section level2">
<h2 class="hasAnchor">
<a href="#risk-of-bias" class="anchor"></a>Risk of Bias</h2>
<p>In biomedical literature, it is common to assess the Risk of Bias of included studies using the <a href="https://handbook-5-1.cochrane.org/chapter_8/8_assessing_risk_of_bias_in_included_studies.htm"><strong>Cochrane Risk of Bias Tool</strong></a>. Such Risk of Bias assessments can be directly performed in <a href="https://community.cochrane.org/help/tools-and-software/revman-5">RevMan</a>, but this comes with certain drawbacks: RevMan graphics are usually of lower quality, and journals often require high-resolution charts and plots; using RevMan along with <em>R</em> to perform a meta-analysis also means that two programs have to be used, which may consume unncessary extra time; lastly, using RevMan to generate Risk of Bias summary plots also reduces the reproducibility of your meta-analysis if you decide to make all your other <em>R</em> analyses fully reproducible using tools such as <a href="https://rmarkdown.rstudio.com/"><strong>RMarkdown</strong></a>.</p>
<p>The <a href="www.dmetar.protectlab.org/reference/rob.summary.html"><code>rob.summary</code></a> function allows you to generate RevMan-style Risk of Bias charts based on <code>ggplot2</code> graphics directly in <em>R</em> from a <em>R</em> data frame. Here is an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/rob.summary.html">rob.summary</a></span>(data, <span class="dt">studies =</span> studies, <span class="dt">table =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="fig/rob_chart.png" align="left" alt="" width="700"></p>
<p><img src="fig/rob_table.png" width="70%" style="display: block; margin: auto;"></p>
<p><br></p>
<p><br></p>
</div>
<div id="subgroup-analysis-meta-regression" class="section level2">
<h2 class="hasAnchor">
<a href="#subgroup-analysis-meta-regression" class="anchor"></a>Subgroup Analysis &amp; Meta-Regression</h2>
<p>The <code>dmetar</code> package contains two functions related to the topic of <strong>moderator variables</strong> of meta-analysis results: <a href="www.dmetar.protectlab.org/reference/subgroup.analysis.mixed.effects.html"><code>subgroup.analysis.mixed.effects</code></a> and <a href="www.dmetar.protectlab.org/reference/multimodel.inference.html"><code>multimodel.inference</code></a>.</p>
<p><br></p>
<p><strong>Mixed-Effects Subgroup Analysis</strong></p>
<p>The first function, <code>subgroup.analysis.mixed.effects</code> performs a subgroup analysis using a mixed-effects model (fixed-effects plural model; Borenstein &amp; Higgins, 2013), in which subgroup effect sizes are pooled using a random-effects model, and subgroup differences are assessed using a fixed-effect model. The function was built as an additional tool for meta-analyses generated by <code>meta</code> functions. In this example, we therefore perform a meta-analysis using the <code>metagen</code> function first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">meta &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/meta/man/metagen.html">metagen</a></span>(TE, seTE, 
                <span class="dt">data =</span> ThirdWave, 
                <span class="dt">studlab =</span> ThirdWave<span class="op">$</span>Author, 
                <span class="dt">comb.fixed =</span> <span class="ot">FALSE</span>, 
                <span class="dt">method.tau =</span> <span class="st">"PM"</span>)</code></pre></div>
<p>We can then use this <code>meta</code> object called <code>meta</code> as input for the function, and only have to specify the subgroups coded in the original data set we want to consider.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/subgroup.analysis.mixed.effects.html">subgroup.analysis.mixed.effects</a></span>(<span class="dt">x =</span> meta, 
                                <span class="dt">subgroups =</span> ThirdWave<span class="op">$</span>TypeControlGroup)</code></pre></div>
<pre><code>#&gt; Subgroup Results:
#&gt; --------------
#&gt;                  k        TE      seTE  LLCI  ULCI            p         Q
#&gt; information only 3 0.4015895 0.1003796 0.205 0.598 6.315313e-05  1.144426
#&gt; no intervention  8 0.5030588 0.1185108 0.271 0.735 2.187531e-05 16.704467
#&gt; WLC              7 0.7822627 0.2096460 0.371 1.193 1.904560e-04 22.167163
#&gt;                    I2 I2.lower I2.upper
#&gt; information only 0.00     0.00     0.82
#&gt; no intervention  0.58     0.08     0.81
#&gt; WLC              0.73     0.42     0.87
#&gt; 
#&gt; Test for subgroup differences (mixed/fixed-effects (plural) model):
#&gt; --------------
#&gt;                       Q df        p
#&gt; Between groups 2.723945  2 0.256155
#&gt; 
#&gt; - Total number of studies included in subgroup analysis:  18
#&gt; - Tau estimator used for within-group pooling:  PM</code></pre>
<p><img src="fig/forest_subgroup.png" align="left" alt="" width="700"></p>
<p><br></p>
<p><strong>Multimodel Inference</strong></p>
<p>The <code>multimodel.inference</code> function, on the other hand, can be used to perform <a href="www.dmetar.protectlab.org/reference/multimodel.inference.html#details"><strong>Multimodel Inference</strong></a> for a meta-regression model.</p>
<p>Here is an example using the <code>MVRegressionData</code> dataset, using <code>pubyear</code>, <code>quality</code>, <code>reputation</code> and <code>continent</code> as predictors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/multimodel.inference.html">multimodel.inference</a></span>(<span class="dt">TE =</span> <span class="st">'yi'</span>, <span class="dt">seTE =</span> <span class="st">'sei'</span>, <span class="dt">data =</span> MVRegressionData,
                           <span class="dt">predictors =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'pubyear'</span>, <span class="st">'quality'</span>,
                                          <span class="st">'reputation'</span>, <span class="st">'continent'</span>))
<span class="co">#&gt; </span>
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|</span><span class="st">                                                                 </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|====</span><span class="st">                                                             </span><span class="er">|</span><span class="st">   </span><span class="dv">6</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|========</span><span class="st">                                                         </span><span class="er">|</span><span class="st">  </span><span class="dv">12</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|============</span><span class="st">                                                     </span><span class="er">|</span><span class="st">  </span><span class="dv">19</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|================</span><span class="st">                                                 </span><span class="er">|</span><span class="st">  </span><span class="dv">25</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|====================</span><span class="st">                                             </span><span class="er">|</span><span class="st">  </span><span class="dv">31</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|========================</span><span class="st">                                         </span><span class="er">|</span><span class="st">  </span><span class="dv">38</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|============================</span><span class="st">                                     </span><span class="er">|</span><span class="st">  </span><span class="dv">44</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|================================</span><span class="st">                                 </span><span class="er">|</span><span class="st">  </span><span class="dv">50</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=====================================</span><span class="st">                            </span><span class="er">|</span><span class="st">  </span><span class="dv">56</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=========================================</span><span class="st">                        </span><span class="er">|</span><span class="st">  </span><span class="dv">62</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=============================================</span><span class="st">                    </span><span class="er">|</span><span class="st">  </span><span class="dv">69</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=================================================</span><span class="st">                </span><span class="er">|</span><span class="st">  </span><span class="dv">75</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=====================================================</span><span class="st">            </span><span class="er">|</span><span class="st">  </span><span class="dv">81</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=========================================================</span><span class="st">        </span><span class="er">|</span><span class="st">  </span><span class="dv">88</span>%
  <span class="op">|</span><span class="st">                                                                       </span>
<span class="st">  </span><span class="er">|=============================================================</span><span class="st">    </span><span class="er">|</span><span class="st">  </span><span class="dv">94</span>%
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Multimodel Inference: Final Results</span>
<span class="co">#&gt; --------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  - Number of fitted models: 16</span>
<span class="co">#&gt;  - Full formula: ~ pubyear + quality + reputation + continent</span>
<span class="co">#&gt;  - Coefficient significance test: knha</span>
<span class="co">#&gt;  - Interactions modeled: no</span>
<span class="co">#&gt;  - Evaluation criterion: AICc </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Best 5 Models</span>
<span class="co">#&gt; --------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Global model call: metafor::rma(yi = TE, sei = seTE, mods = form, data = glm.data, </span>
<span class="co">#&gt;     method = method, test = test)</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Model selection table </span>
<span class="co">#&gt;    (Intrc) cntnn  pubyr   qulty   rpttn df logLik AICc delta weight</span>
<span class="co">#&gt; 12       +     + 0.3533         0.02160  5  2.981  6.0  0.00  0.536</span>
<span class="co">#&gt; 16       +     + 0.4028 0.02210 0.01754  6  4.071  6.8  0.72  0.375</span>
<span class="co">#&gt; 8        +     + 0.4948 0.03574          5  0.646 10.7  4.67  0.052</span>
<span class="co">#&gt; 11       +       0.2957         0.02725  4 -1.750 12.8  6.75  0.018</span>
<span class="co">#&gt; 15       +       0.3547 0.02666 0.02296  5 -0.395 12.8  6.75  0.018</span>
<span class="co">#&gt; Models ranked by AICc(x) </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Multimodel Inference Coefficients</span>
<span class="co">#&gt; --------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;              Estimate  Std. Error   z value  Pr(&gt;|z|)</span>
<span class="co">#&gt; intrcpt    0.38614661 0.106983583 3.6094006 0.0003069</span>
<span class="co">#&gt; continent1 0.24743836 0.083113174 2.9771256 0.0029096</span>
<span class="co">#&gt; pubyear    0.37816796 0.083045572 4.5537402 0.0000053</span>
<span class="co">#&gt; reputation 0.01899347 0.007420427 2.5596198 0.0104787</span>
<span class="co">#&gt; quality    0.01060060 0.014321158 0.7402055 0.4591753</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Predictor Importance</span>
<span class="co">#&gt; --------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;        model importance</span>
<span class="co">#&gt; 1    pubyear  0.9988339</span>
<span class="co">#&gt; 2  continent  0.9621839</span>
<span class="co">#&gt; 3 reputation  0.9428750</span>
<span class="co">#&gt; 4    quality  0.4432826</span></code></pre></div>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-20-1.png" width="480" style="display: block; margin: auto;"></p>
<p><br></p>
<p><br></p>
</div>
<div id="influence-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#influence-analysis" class="anchor"></a>Influence Analysis</h2>
<p>Influence Analysis can be helpful to detect studies which:</p>
<ul>
<li>contribute highly to the between-study heterogeneity found in a meta-analysis (e.g., outliers) and could therefore be excluded in a sensitivity analysis, or</li>
<li>have a large impact on the pooled effect size of a meta-analysis, meaning that the overall effect size may change considerably when this one study is removed.</li>
</ul>
<p>The <a href="www.dmetar.protectlab.org/reference/InfluenceAnalysis.html"><code>InfluenceAnalysis</code></a> is a wrapper around several influence analysis function included in the <code>meta</code> and <code>metafor</code> package. It provides four types of influence diagnostics in one single plot. The function works for meta-analysis objects created by <code>meta</code> functions, which can then be directly used as input for the function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/InfluenceAnalysis.html">InfluenceAnalysis</a></span>(meta)
<span class="co">#&gt; [============================================================</span></code></pre></div>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-21-1.png" width="960"></p>
<pre><code>#&gt; ===============] DONE</code></pre>
<p><br></p>
<p>Additionally, the <a href="https://dmetar.protectlab.org/reference/gosh.diagnostics.html"><code>gosh.diagnostics</code></a> can be used to analyze influence patterns using objects generated by <code>metafor</code>s <code>gosh</code> function. The <code>gosh.diagnostics</code> function uses unsupervised learning algorithms to determine effect size-heterogeneity patterns in the meta-analysis data. We can use <code>dmetars</code> in-built <code>m.gosh</code> data set, which has been generated using <code>metafor</code>s <code>gosh</code> function as an example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"m.gosh"</span>)
<span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/gosh.diagnostics.html">gosh.diagnostics</a></span>(m.gosh)
<span class="co">#&gt;   </span>
<span class="co">#&gt;  Perform Clustering... </span>
<span class="co">#&gt; [==============================================================================================] DONE</span></code></pre></div>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<pre><code>#&gt; 
#&gt;  Number of k-means clusters used: 3</code></pre>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-22-2.png" width="700"></p>
<pre><code>#&gt; 
#&gt;  Number of DBSCAN clusters detected: 2</code></pre>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-22-3.png" width="700"></p>
<pre><code>#&gt; 
#&gt;  Number of GMM clusters detected: 2 
#&gt; 
#&gt;  Identification of potential outliers 
#&gt;  ---------------------------------</code></pre>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-22-4.png" width="700"><img src="dmetar_vignette_files/figure-html/unnamed-chunk-22-5.png" width="700"></p>
<pre><code>#&gt;   
#&gt;  Studies identified as potential outliers: 
#&gt; 
#&gt;  - K-means: 3 1 
#&gt; 
#&gt;  - DBSCAN: 1 3 
#&gt; 
#&gt;  - Gaussian Mixture Model: 3</code></pre>
<p><br></p>
<p><br></p>
</div>
<div id="publication-bias" class="section level2">
<h2 class="hasAnchor">
<a href="#publication-bias" class="anchor"></a>Publication Bias</h2>
<p>The package contains two functions to assess the potential presence of publication bias in a meta-analysis: <a href="www.dmetar.protectlab.org/reference/eggers.test.html"><code>eggers.test</code></a> and <a href="www.dmetar.protectlab.org/reference/eggers.test.html"><code>pcurve</code></a>. Both methods are optimized for conducting meta-analyses using the <code>meta</code> package, and only have to be provided with a <code>meta</code> meta-analysis results object.</p>
<p><br></p>
<p><strong>Here is an example output for</strong> <code>eggers.test</code><strong>:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/eggers.test.html">eggers.test</a></span>(meta)
<span class="co">#&gt;              Intercept ConfidenceInterval     t       p</span>
<span class="co">#&gt; Egger's test     4.111        2.347-5.875 4.677 0.00025</span></code></pre></div>
<p><br></p>
<p><strong>And here for</strong> <code>pcurve</code><strong>:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/pcurve.html">pcurve</a></span>(meta)</code></pre></div>
<p><img src="dmetar_vignette_files/figure-html/unnamed-chunk-24-1.png" width="576" style="display: block; margin: auto;"></p>
<pre><code>#&gt; P-curve analysis 
#&gt;  ----------------------- 
#&gt; - Total number of provided studies: k = 18 
#&gt; - Total number of p&lt;0.05 studies included into the analysis: k = 11 (61.11%) 
#&gt; - Total number of studies with p&lt;0.025: k = 10 (55.56%) 
#&gt;    
#&gt; Results 
#&gt;  ----------------------- 
#&gt;                     pBinomial  zFull pFull  zHalf pHalf
#&gt; Right-skewness test     0.006 -5.943 0.000 -4.982     0
#&gt; Flatness test           0.975  3.260 0.999  5.158     1
#&gt; Note: p-values of 0 or 1 correspond to p&lt;0.001 and p&gt;0.999, respectively.   
#&gt; Power Estimate: 84% (62.7%-94.6%)
#&gt;    
#&gt; Evidential value 
#&gt;  ----------------------- 
#&gt; - Evidential value present: yes 
#&gt; - Evidential value absent/inadequate: no 
#&gt; </code></pre>
<p><br></p>
<p><br></p>
</div>
<div id="network-meta-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#network-meta-analysis" class="anchor"></a>Network Meta-Analysis</h2>
<p>The package contains two utility functions for network meta-analysis using the <code>gemtc</code> (Van Valkenhoef &amp; Kuiper, 2016) and <code>netmeta</code> (Rücker, Krahn, König, Efthimiou &amp; Schwarzer, 2019) packages.</p>
<p>The first one, <a href="www.dmetar.protectlab.org/reference/direct.evidence.plot.html"><code>direct.evidence.plot</code></a> creates a plot for the direct evidence proportion of comparisons included in a network meta-analysis model and displays diagnostics proposed by König, Krahn and Binder (2013). It only requires a network meta-analysis object created by the <code>netmeta</code> function as input. We will use <code>dmetar</code>s in-built <code>NetDataNetmeta</code> dataset for this example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(netmeta)

<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"NetDataNetmeta"</span>)

nmeta =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/netmeta/man/netmeta.html">netmeta</a></span>(TE, seTE, treat1, treat2, 
                  <span class="dt">data=</span>NetDataNetmeta, 
                  <span class="dt">studlab =</span> NetDataNetmeta<span class="op">$</span>studlab)

<span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/direct.evidence.plot.html">direct.evidence.plot</a></span>(nmeta)</code></pre></div>
<p><img src="fig/directevidence.png" width="500" style="display: block; margin: auto;"></p>
<p><br></p>
<p>The second, <a href="www.dmetar.protectlab.org/reference/sucra.html"><code>sucra</code></a>, calculates the <span class="math inline">\(SUCRA\)</span> for each treatment when provided with a <code>mtc.rank.probability</code> network meta-analysis results object, or a matrix containing rank probabilities. In this example, we will use <code>dmetar</code>s in-built <code>NetDataGemtc</code> data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(gemtc)

<span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"NetDataGemtc"</span>)

<span class="co"># Create Network Meta-Analysis Model</span>
network =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/gemtc/man/mtc.network.html">mtc.network</a></span>(<span class="dt">data.re =</span> NetDataGemtc)

model =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/gemtc/man/mtc.model.html">mtc.model</a></span>(network, <span class="dt">linearModel =</span> <span class="st">"fixed"</span>,
                   <span class="dt">n.chain =</span> <span class="dv">4</span>,
                   <span class="dt">likelihood =</span> <span class="st">"normal"</span>,
                   <span class="dt">link =</span> <span class="st">"identity"</span>)

mcmc =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/gemtc/man/mtc.run.html">mtc.run</a></span>(model, <span class="dt">n.adapt =</span> <span class="dv">5000</span>, 
               <span class="dt">n.iter =</span> <span class="dv">100000</span>, <span class="dt">thin =</span> <span class="dv">10</span>)

rp =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/gemtc/man/rank.probability.html">rank.probability</a></span>(mcmc)

<span class="co"># Create sucra</span>
<span class="kw"><a href="https://rdrr.io/pkg/dmetar/man/sucra.html">sucra</a></span>(rp, <span class="dt">lower.is.better =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="fig/sucra.png" width="40%" style="display: block; margin: auto;"></p>
<p><br></p>
<p><br></p>
<p><br></p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p><strong>Furukawa, T. A., &amp; Leucht, S. (2011)</strong>. How to obtain NNT from Cohen’s d: comparison of two methods. <em>PloS one, 6</em>(4), e19070.</p>
<p><strong>Harrer, M., Cuijpers, P., Furukawa, T.A, &amp; Ebert, D. D. (2019)</strong>. <em>Doing Meta-Analysis in R: A Hands-on Guide</em>. DOI: 10.5281/zenodo.2551803.</p>
<p><strong>König J., Krahn U., Binder H. (2013)</strong>: Visualizing the flow of evidence in network meta-analysis and characterizing mixed treatment comparisons. <em>Statistics in Medicine, 32</em>, 5414–29</p>
<p><strong>Rücker, G., Krahn, U., König, J., Efthimiou, O. &amp; Schwarzer, G. (2019)</strong>. netmeta: Network Meta-Analysis using Frequentist Methods. <em>R package version 1.0-1</em>. <a href="https://CRAN.R-project.org/package=netmeta" class="uri">https://CRAN.R-project.org/package=netmeta</a></p>
<p><strong>Schwarzer, G. (2007)</strong>, meta: An R package for meta-analysis, <em>R News, 7</em>(3), 40-45.</p>
<p><strong>Van Valkenhoef, G. &amp; Kuiper, J. (2016)</strong>. gemtc: Network Meta-Analysis Using Bayesian Methods. <em>R package version 0.8-2</em>. <a href="https://CRAN.R-project.org/package=gemtc" class="uri">https://CRAN.R-project.org/package=gemtc</a></p>
<p><strong>Viechtbauer, W. (2010)</strong>. Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software, 36</em>(3), 1-48. URL: <a href="http://www.jstatsoft.org/v36/i03/" class="uri">http://www.jstatsoft.org/v36/i03/</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#about-dmetar">About <code>dmetar</code></a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#functionality">Functionality</a></li>
      <li><a href="#datasets">Datasets</a></li>
      <li><a href="#power-analysis">Power Analysis</a></li>
      <li><a href="#effect-size-calculation">Effect size calculation</a></li>
      <li><a href="#risk-of-bias">Risk of Bias</a></li>
      <li><a href="#subgroup-analysis-meta-regression">Subgroup Analysis &amp; Meta-Regression</a></li>
      <li><a href="#influence-analysis">Influence Analysis</a></li>
      <li><a href="#publication-bias">Publication Bias</a></li>
      <li><a href="#network-meta-analysis">Network Meta-Analysis</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mathias Harrer, Pim Cuijpers, Toshi Furukawa, David Daniel Ebert.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
